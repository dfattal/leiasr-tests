<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LeiaSR SDK: HeadTracker API</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="extrastyle.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="sr-logo.svg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">LeiaSR SDK<span id="projectnumber">&#160;3e4093ae v1.34.8.37806 2025-10-23T12:33:42Z</span>
   </div>
   <div id="projectbrief">Stable</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">HeadTracker API </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p ><a class="anchor" id="md_C__GitLabRunner_builds_fe33718a_0_simulatedreality_simulatedreality_modules_srFacetrackers_documentation_public_headtracker_api"></a> The HeadTracker API works similarly to the <b><a class="el" href="eyetracker-api.html">EyeTracker API</a></b>, but also exposes the user's head position and orientation and the user's ear positions in addition to the user's eye positions.</p>
<h1><a class="anchor" id="autotoc_md53"></a>
Classes</h1>
<p >The HeadTracker API consists out of the following classes</p>
<ul>
<li><code>SRContext</code> is an essential element of any <a class="el" href="namespaceSR.html" title="Namespace containing all C++ Simulated Reality classes.">SR</a> application, it maintains a list of all <a class="el" href="namespaceSR.html" title="Namespace containing all C++ Simulated Reality classes.">SR</a> components that are in use and cleans them up when the application ends. It also allows different components of the application to share the same Sense implementations.</li>
<li><code>Sense</code> is an interface used by the <code>SRContext</code> to keep track of any input or output devices.</li>
<li><code>HeadTracker</code> is an interface providing access to the data.</li>
<li><code>HeadStream</code> connects <code>HeadTracker</code> implementations with user defined <code>HeadListener</code> implementations.</li>
<li><code>HeadListener</code> is an interface to be implemented by any components of the user's application that want to receive the data.</li>
<li><code><a class="el" href="structSR__head.html" title="C-compatible struct containing the position of head.">SR_head</a></code> contains the output data.</li>
</ul>
<h2><a class="anchor" id="autotoc_md54"></a>
Head Pose Data</h2>
<p >The <code><a class="el" href="structSR__head.html" title="C-compatible struct containing the position of head.">SR_head</a></code> struct is at the center of the HeadTracker interface, this is what applications can subscribe to.</p>
<div class="fragment"><div class="line"><span class="keyword">typedef</span> <span class="keyword">struct </span>{</div>
<div class="line">    uint64_t frameId; </div>
<div class="line">    uint64_t time;    </div>
<div class="line">    <a class="code hl_struct" href="structSR__headPose.html">SR_headPose</a> headPose;</div>
<div class="line">    <a class="code hl_struct" href="structSR__eyePair.html">SR_eyePair</a> eyes;</div>
<div class="line">    <a class="code hl_struct" href="structSR__earPair.html">SR_earPair</a> ears;</div>
<div class="line">} <a class="code hl_struct" href="structSR__head.html">SR_head</a>;</div>
<div class="ttc" id="astructSR__earPair_html"><div class="ttname"><a href="structSR__earPair.html">SR_earPair</a></div><div class="ttdef"><b>Definition:</b> head.h:21</div></div>
<div class="ttc" id="astructSR__eyePair_html"><div class="ttname"><a href="structSR__eyePair.html">SR_eyePair</a></div><div class="ttdoc">C-compatible struct containing the position of two eyes.</div><div class="ttdef"><b>Definition:</b> eyepair.h:23</div></div>
<div class="ttc" id="astructSR__headPose_html"><div class="ttname"><a href="structSR__headPose.html">SR_headPose</a></div><div class="ttdef"><b>Definition:</b> head.h:11</div></div>
<div class="ttc" id="astructSR__head_html"><div class="ttname"><a href="structSR__head.html">SR_head</a></div><div class="ttdoc">C-compatible struct containing the position of head.</div><div class="ttdef"><b>Definition:</b> head.h:38</div></div>
</div><!-- fragment --><p >The <code><a class="el" href="structSR__head.html" title="C-compatible struct containing the position of head.">SR_head</a></code> struct contains the head pose, eye positions and ear positions. For more information on the head pose data, you can take a look at the <b><a class="el" href="headposetracker-api.html">HeadPoseTracker API</a></b>. For more information on the eye position data, see the <b><a class="el" href="eyetracker-api.html">EyeTracker API</a></b>.</p>
<p >The ear position data is only available through the HeadTracker interface. Currently, the ear positions are simply calculated as a constant offset from the head position, but this may change in the future.</p>
<p >The ear position data is contained in the <code><a class="el" href="structSR__earPair.html">SR_earPair</a></code> struct:</p>
<div class="fragment"><div class="line"><span class="keyword">typedef</span> <span class="keyword">struct </span>{</div>
<div class="line">    uint64_t frameId; </div>
<div class="line">    uint64_t time;    </div>
<div class="line">    <span class="keyword">union </span>{</div>
<div class="line">        <a class="code hl_union" href="unionSR__vector3d.html">SR_point3d</a> ears[2]; </div>
<div class="line">        <span class="keyword">struct </span>{</div>
<div class="line">            <a class="code hl_union" href="unionSR__vector3d.html">SR_point3d</a> left; </div>
<div class="line">            <a class="code hl_union" href="unionSR__vector3d.html">SR_point3d</a> right; </div>
<div class="line">        };</div>
<div class="line">    };</div>
<div class="line">} <a class="code hl_struct" href="structSR__earPair.html">SR_earPair</a>;</div>
<div class="ttc" id="aunionSR__vector3d_html"><div class="ttname"><a href="unionSR__vector3d.html">SR_vector3d</a></div><div class="ttdoc">C-compatible 3d double vector representation.</div><div class="ttdef"><b>Definition:</b> types.h:73</div></div>
</div><!-- fragment --><p >The head positions are relative to the <b><a class="el" href="coordinates.html">normal SR output coordinate system</a></b>.</p>
<h1><a class="anchor" id="autotoc_md55"></a>
HeadTracker usage</h1>
<p >Application developers should define how to handle the head pose data by implementing an <code>HeadListener</code>. It is advisable to include an <code>InputStream&lt;<a class="el" href="classSR_1_1HeadStream.html" title="Stream of SR_head objects.">SR::HeadStream</a>&gt;</code> member, this will come into play when the actual head pose tracker is constructed.</p>
<div class="fragment"><div class="line"><span class="keyword">class </span>HeadListenerImplementation : <span class="keyword">public</span> <a class="code hl_class" href="classSR_1_1HeadListener.html">SR::HeadListener</a></div>
<div class="line">{</div>
<div class="line"><span class="keyword">public</span>:</div>
<div class="line">    <span class="comment">// Ensures HeadStream is cleaned up when Listener object is out of scope</span></div>
<div class="line">    <a class="code hl_class" href="classSR_1_1InputStream.html">SR::InputStream&lt;SR::HeadStream&gt;</a> stream;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// The accept function can process the head data as soon as it becomes available</span></div>
<div class="line">    <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code hl_function" href="classSR_1_1HeadListener.html#a5212fdbb73815cd7cb45efadc5fb9038">accept</a>(<span class="keyword">const</span> <a class="code hl_struct" href="structSR__head.html">SR_head</a>&amp; frame)<span class="keyword"> override </span>{</div>
<div class="line">        <span class="comment">// Use head data</span></div>
<div class="line">    }</div>
<div class="line">};</div>
<div class="ttc" id="aclassSR_1_1HeadListener_html"><div class="ttname"><a href="classSR_1_1HeadListener.html">SR::HeadListener</a></div><div class="ttdoc">Interface for listening to SR_head updates This interface is supported from Eye Tracker version 1....</div><div class="ttdef"><b>Definition:</b> headlistener.h:16</div></div>
<div class="ttc" id="aclassSR_1_1HeadListener_html_a5212fdbb73815cd7cb45efadc5fb9038"><div class="ttname"><a href="classSR_1_1HeadListener.html#a5212fdbb73815cd7cb45efadc5fb9038">SR::HeadListener::accept</a></div><div class="ttdeci">virtual void accept(const SR_head &amp;frame)=0</div><div class="ttdoc">Accept an SR_head frame.</div></div>
<div class="ttc" id="aclassSR_1_1InputStream_html"><div class="ttname"><a href="classSR_1_1InputStream.html">SR::InputStream</a></div><div class="ttdoc">Template class to wrap data stream to a listener object.</div><div class="ttdef"><b>Definition:</b> inputstream.h:20</div></div>
</div><!-- fragment --><p> To get access to head pose data, users will have to construct an SRContext and call the static factory function <code>HeadTracker::create</code> as follows:</p>
<div class="fragment"><div class="line"><span class="keywordtype">int</span> main() {</div>
<div class="line">    <span class="comment">// Create HeadTracker</span></div>
<div class="line">    <a class="code hl_class" href="classSR_1_1SRContext.html">SR::SRContext</a> context;</div>
<div class="line">    <a class="code hl_class" href="classSR_1_1HeadTracker.html">SR::HeadTracker</a>* headTracker = <a class="code hl_function" href="classSR_1_1HeadTracker.html#a9bea0c90523a92b3d0d84554fb627d8a">SR::HeadTracker::create</a>(context);</div>
<div class="ttc" id="aclassSR_1_1HeadTracker_html"><div class="ttname"><a href="classSR_1_1HeadTracker.html">SR::HeadTracker</a></div><div class="ttdoc">Sense class which provides face tracking functionality to the SR system.</div><div class="ttdef"><b>Definition:</b> headtracker.h:31</div></div>
<div class="ttc" id="aclassSR_1_1HeadTracker_html_a9bea0c90523a92b3d0d84554fb627d8a"><div class="ttname"><a href="classSR_1_1HeadTracker.html#a9bea0c90523a92b3d0d84554fb627d8a">SR::HeadTracker::create</a></div><div class="ttdeci">static HeadTracker * create(SRContext &amp;context)</div><div class="ttdoc">Creates a functional HeadTracker instance.</div></div>
<div class="ttc" id="aclassSR_1_1SRContext_html"><div class="ttname"><a href="classSR_1_1SRContext.html">SR::SRContext</a></div><div class="ttdoc">Maintains WorldObject and Sense objects during the application lifetime.</div><div class="ttdef"><b>Definition:</b> srcontext.h:75</div></div>
</div><!-- fragment --><p >Then we need to construct a listener that follows the desired way of processing the data. By calling <code>set</code> on the <code>InputStream&lt;<a class="el" href="classSR_1_1HeadStream.html" title="Stream of SR_head objects.">SR::HeadStream</a>&gt;</code> field we ensure that the stream is destructed correctly when the <code>HeadListenerImplementation</code> goes out of scope. When everything is set up <code>context.initialize()</code> starts using any newly constructed streams to listeners.</p>
<div class="fragment"><div class="line"><span class="comment">// Construct listener</span></div>
<div class="line">HeadListenerImplementation listener;</div>
<div class="line">listener.stream.set(headTracker-&gt;<a class="code hl_function" href="classSR_1_1HeadTracker.html#adc863f912fb28f6c70142546cbf01d80">openHeadStream</a>(&amp;listener));</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Start tracking</span></div>
<div class="line">context.<a class="code hl_function" href="classSR_1_1SRContext.html#a6e889901b983ced27c24732fcae177c1">initialize</a>();</div>
<div class="ttc" id="aclassSR_1_1HeadTracker_html_adc863f912fb28f6c70142546cbf01d80"><div class="ttname"><a href="classSR_1_1HeadTracker.html#adc863f912fb28f6c70142546cbf01d80">SR::HeadTracker::openHeadStream</a></div><div class="ttdeci">virtual std::shared_ptr&lt; HeadStream &gt; openHeadStream(HeadListener *listener)=0</div><div class="ttdoc">Creates a HeadStream for listener to be connected to.</div></div>
<div class="ttc" id="aclassSR_1_1SRContext_html_a6e889901b983ced27c24732fcae177c1"><div class="ttname"><a href="classSR_1_1SRContext.html#a6e889901b983ced27c24732fcae177c1">SR::SRContext::initialize</a></div><div class="ttdeci">void initialize()</div><div class="ttdoc">Initialize all senses.</div></div>
</div><!-- fragment --><p >If the main function of our application returns, all deconstructors will be called and we will no longer receive data. We should ensure that the application remains open as long as we want.</p>
<div class="fragment"><div class="line">    <span class="comment">// Ensure that the program does not exit immediately.</span></div>
<div class="line">    <span class="keywordtype">char</span> inchar;</div>
<div class="line">    std::cin &gt;&gt; inchar; <span class="comment">//wait for key press</span></div>
<div class="line">}</div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.2
</small></address>
</body>
</html>

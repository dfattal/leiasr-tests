<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LeiaSR SDK: HeadPoseTracker API</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="extrastyle.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="sr-logo.svg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">LeiaSR SDK<span id="projectnumber">&#160;3e4093ae v1.34.8.37806 2025-10-23T12:33:42Z</span>
   </div>
   <div id="projectbrief">Stable</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">HeadPoseTracker API </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p ><a class="anchor" id="md_C__GitLabRunner_builds_fe33718a_0_simulatedreality_simulatedreality_modules_srFacetrackers_documentation_public_headposetracker_api"></a> The HeadPoseTracker API works similarly to the <b><a class="el" href="eyetracker-api.html">EyeTracker API</a></b>, but exposes the user's head position and orientation rather than the user's eye positions.</p>
<h1><a class="anchor" id="autotoc_md50"></a>
Classes</h1>
<p >The HeadPoseTracker API consists out of the following classes</p>
<ul>
<li><code>SRContext</code> is an essential element of any <a class="el" href="namespaceSR.html" title="Namespace containing all C++ Simulated Reality classes.">SR</a> application, it maintains a list of all <a class="el" href="namespaceSR.html" title="Namespace containing all C++ Simulated Reality classes.">SR</a> components that are in use and cleans them up when the application ends. It also allows different components of the application to share the same Sense implementations.</li>
<li><code>Sense</code> is an interface used by the <code>SRContext</code> to keep track of any input or output devices.</li>
<li><code>HeadPoseTracker</code> is an interface providing access to head pose data.</li>
<li><code>HeadPoseStream</code> connects <code>HeadPoseTracker</code> implementations with user defined <code>HeadPoseListener</code> implementations.</li>
<li><code>HeadPoseListener</code> is an interface to be implemented by any components of the user's application that want to receive head pose data.</li>
<li><code><a class="el" href="structSR__headPose.html">SR_headPose</a></code> contains the output data.</li>
</ul>
<h2><a class="anchor" id="autotoc_md51"></a>
Head Pose Data</h2>
<p >The <code><a class="el" href="structSR__headPose.html">SR_headPose</a></code> struct is at the center of the HeadPoseTracker interface, this is what applications can subscribe to.</p>
<div class="fragment"><div class="line"><span class="keyword">typedef</span> <span class="keyword">struct </span>{</div>
<div class="line">    uint64_t frameId; </div>
<div class="line">    uint64_t time;    </div>
<div class="line">    <a class="code hl_union" href="unionSR__vector3d.html">SR_point3d</a> position; </div>
<div class="line">    <a class="code hl_union" href="unionSR__vector3d.html">SR_point3d</a> orientation; </div>
<div class="line">    </div>
<div class="line">} <a class="code hl_struct" href="structSR__headPose.html">SR_headPose</a>;</div>
<div class="ttc" id="astructSR__headPose_html"><div class="ttname"><a href="structSR__headPose.html">SR_headPose</a></div><div class="ttdef"><b>Definition:</b> head.h:11</div></div>
<div class="ttc" id="aunionSR__vector3d_html"><div class="ttname"><a href="unionSR__vector3d.html">SR_vector3d</a></div><div class="ttdoc">C-compatible 3d double vector representation.</div><div class="ttdef"><b>Definition:</b> types.h:73</div></div>
</div><!-- fragment --><p >The <code><a class="el" href="structSR__headPose.html">SR_headPose</a></code> struct contains the head position and orientation. For more insight to what these vectors mean, take a look at the <b><a class="el" href="coordinates.html">coordinate system documentation</a></b>.</p>
<h1><a class="anchor" id="autotoc_md52"></a>
HeadPoseTracker usage</h1>
<p >Application developers should define how to handle the head pose data by implementing an <code>HeadPoseListener</code>. It is advisable to include an <code>InputStream&lt;<a class="el" href="classSR_1_1HeadPoseStream.html" title="Stream of SR_headPose objects.">SR::HeadPoseStream</a>&gt;</code> member, this will come into play when the actual head pose tracker is constructed.</p>
<div class="fragment"><div class="line"><span class="keyword">class </span>HeadPoseListenerImplementation : <span class="keyword">public</span> <a class="code hl_class" href="classSR_1_1HeadPoseListener.html">SR::HeadPoseListener</a></div>
<div class="line">{</div>
<div class="line"><span class="keyword">public</span>:</div>
<div class="line">    <span class="comment">// Ensures HeadPoseStream is cleaned up when Listener object is out of scope</span></div>
<div class="line">    <a class="code hl_class" href="classSR_1_1InputStream.html">SR::InputStream&lt;SR::HeadPoseStream&gt;</a> stream;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// The accept function can process the head pose data as soon as it becomes available</span></div>
<div class="line">    <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code hl_function" href="classSR_1_1HeadPoseListener.html#af9adc761f06e988ea81512aaa39f8f2c">accept</a>(<span class="keyword">const</span> <a class="code hl_struct" href="structSR__headPose.html">SR_headPose</a>&amp; frame)<span class="keyword"> override </span>{</div>
<div class="line">        <span class="comment">// Use head pose data</span></div>
<div class="line">    }</div>
<div class="line">};</div>
<div class="ttc" id="aclassSR_1_1HeadPoseListener_html"><div class="ttname"><a href="classSR_1_1HeadPoseListener.html">SR::HeadPoseListener</a></div><div class="ttdoc">Interface for listening to SR_headPose updates This interface is supported from Eye Tracker version 1...</div><div class="ttdef"><b>Definition:</b> headposelistener.h:16</div></div>
<div class="ttc" id="aclassSR_1_1HeadPoseListener_html_af9adc761f06e988ea81512aaa39f8f2c"><div class="ttname"><a href="classSR_1_1HeadPoseListener.html#af9adc761f06e988ea81512aaa39f8f2c">SR::HeadPoseListener::accept</a></div><div class="ttdeci">virtual void accept(const SR_headPose &amp;frame)=0</div><div class="ttdoc">Accept an SR_headPose frame.</div></div>
<div class="ttc" id="aclassSR_1_1InputStream_html"><div class="ttname"><a href="classSR_1_1InputStream.html">SR::InputStream</a></div><div class="ttdoc">Template class to wrap data stream to a listener object.</div><div class="ttdef"><b>Definition:</b> inputstream.h:20</div></div>
</div><!-- fragment --><p> To get access to head pose data, users will have to construct an SRContext and call the static factory function <code>HeadPoseTracker::create</code> as follows:</p>
<div class="fragment"><div class="line"><span class="keywordtype">int</span> main() {</div>
<div class="line">    <span class="comment">// Create HeadPoseTracker</span></div>
<div class="line">    <a class="code hl_class" href="classSR_1_1SRContext.html">SR::SRContext</a> context;</div>
<div class="line">    <a class="code hl_class" href="classSR_1_1HeadPoseTracker.html">SR::HeadPoseTracker</a>* headPoseTracker = <a class="code hl_function" href="classSR_1_1HeadPoseTracker.html#accac35cfbeba50e660bac1d3d3f5f2d9">SR::HeadPoseTracker::create</a>(context);</div>
<div class="ttc" id="aclassSR_1_1HeadPoseTracker_html"><div class="ttname"><a href="classSR_1_1HeadPoseTracker.html">SR::HeadPoseTracker</a></div><div class="ttdoc">Sense class which provides head pose tracking functionality to the SR system.</div><div class="ttdef"><b>Definition:</b> headposetracker.h:31</div></div>
<div class="ttc" id="aclassSR_1_1HeadPoseTracker_html_accac35cfbeba50e660bac1d3d3f5f2d9"><div class="ttname"><a href="classSR_1_1HeadPoseTracker.html#accac35cfbeba50e660bac1d3d3f5f2d9">SR::HeadPoseTracker::create</a></div><div class="ttdeci">static HeadPoseTracker * create(SRContext &amp;context)</div><div class="ttdoc">Creates a functional HeadPoseTracker instance.</div></div>
<div class="ttc" id="aclassSR_1_1SRContext_html"><div class="ttname"><a href="classSR_1_1SRContext.html">SR::SRContext</a></div><div class="ttdoc">Maintains WorldObject and Sense objects during the application lifetime.</div><div class="ttdef"><b>Definition:</b> srcontext.h:75</div></div>
</div><!-- fragment --><p >Then we need to construct a listener that follows the desired way of processing the data. By calling <code>set</code> on the <code>InputStream&lt;<a class="el" href="classSR_1_1HeadPoseStream.html" title="Stream of SR_headPose objects.">SR::HeadPoseStream</a>&gt;</code> field we ensure that the stream is destructed correctly when the <code>HeadPoseListenerImplementation</code> goes out of scope. When everything is set up <code>context.initialize()</code> starts using any newly constructed streams to listeners.</p>
<div class="fragment"><div class="line"><span class="comment">// Construct listener</span></div>
<div class="line">HeadPoseListenerImplementation listener;</div>
<div class="line">listener.stream.set(headPoseTracker-&gt;<a class="code hl_function" href="classSR_1_1HeadPoseTracker.html#a5ae2e24244c9653d19ef2da119f23a97">openHeadPoseStream</a>(&amp;listener));</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Start tracking</span></div>
<div class="line">context.<a class="code hl_function" href="classSR_1_1SRContext.html#a6e889901b983ced27c24732fcae177c1">initialize</a>();</div>
<div class="ttc" id="aclassSR_1_1HeadPoseTracker_html_a5ae2e24244c9653d19ef2da119f23a97"><div class="ttname"><a href="classSR_1_1HeadPoseTracker.html#a5ae2e24244c9653d19ef2da119f23a97">SR::HeadPoseTracker::openHeadPoseStream</a></div><div class="ttdeci">virtual std::shared_ptr&lt; HeadPoseStream &gt; openHeadPoseStream(HeadPoseListener *listener)=0</div><div class="ttdoc">Creates a HeadPoseStream for listener to be connected to.</div></div>
<div class="ttc" id="aclassSR_1_1SRContext_html_a6e889901b983ced27c24732fcae177c1"><div class="ttname"><a href="classSR_1_1SRContext.html#a6e889901b983ced27c24732fcae177c1">SR::SRContext::initialize</a></div><div class="ttdeci">void initialize()</div><div class="ttdoc">Initialize all senses.</div></div>
</div><!-- fragment --><p >If the main function of our application returns, all deconstructors will be called and we will no longer receive data. We should ensure that the application remains open as long as we want.</p>
<div class="fragment"><div class="line">    <span class="comment">// Ensure that the program does not exit immediately.</span></div>
<div class="line">    <span class="keywordtype">char</span> inchar;</div>
<div class="line">    std::cin &gt;&gt; inchar; <span class="comment">//wait for key press</span></div>
<div class="line">}</div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.2
</small></address>
</body>
</html>
